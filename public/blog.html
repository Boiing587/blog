<!DOCTYPE html>
<html>
  <head>
    <script src='sidebar.js'></script>
    <link rel='shortcut icon' href='favicon.ico' />
    <title>Blog</title>
  </head>
  <body>
    <main>
      <div id='posts'>
      </div>
    </main>
    <script>
      fetch('/posts.json')
        .then(res => res.json())
        .then((posts) => {
          console.log(posts)
          console.log(posts.length)
          for(let i = posts.length -1; i > -1; i--){
            document.getElementById('posts').innerHTML += `
              <div id='post'>
                <h1 id='blogTitle'>${posts[i].title}</h1>
                <p id='author'>by ${posts[i].author}</p>
                <p id='content'>${posts[i].content}</p>
                <span class='delete' id='mode' title='Delete this post'><img id='lightimg' src='img/light.png'><img id='darkimg' src='img/styles.png'></span>
              </div>
              `;
            if (localStorage.getItem('mode') == 'light') {
            document.getElementById('darkimg').style.visibility='hidden';
            document.getElementById('lightimg').style.visibility='visible';
            } else if (localStorage.getItem('mode') == 'styles') {
            document.getElementById('lightimg').style.visibility='hidden';
            document.getElementById('darkimg').style.visibility='visible';
            }
          }


          /* posts.forEach(function (item) {
            document.getElementById('posts').innerHTML += `
              <h1 id='blogTitle'>${i}. ${item.title}</h1>
              <p id='author'>by ${item.author}</p>
              <p id='content'>${item.content}</p>
            `;
            i++;
          }) */
        })
        .catch(err => { throw err });
    </script>
  </body>
